<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>座席管理システム</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
</head>
<body>
  <header>
    <h1>座席管理システム</h1>
    <nav id="sidebar">
      <button onclick="navigate('scanSection')">💽QRスキャン</button>
      <button onclick="navigate('rankingSection')">💾 順位登録</button>
      <button onclick="navigate('historySection')">🔔 履歴</button>
      <button onclick="navigate('helpSection')">🔎 操作ヘルプ</button>
      <button onclick="window.open('https://qr212345.github.io/QW/')">📍 リアルタイム座席</button>
      <button onclick="window.open('https://qr212345.github.io/rankingusheet/')">📊 リアルタイムランキング</button>
    </nav>
  </header>

  <main>
  <!-- メッセージ表示 -->
  <div id="messageArea" class="message-area"></div>

    <!-- QRスキャンセクション -->
    <section id="scanSection" class="section" style="display:none;">
      <h2>QRコードスキャン</h2>
      <div id="reader" class="qr-reader"></div>
      <p id="result">読み取り結果がここに表示されます</p>
      <div id="seatList" class="seat-list"></div>
      <div class="controls">
        <button id="undoBtn">↩ Undo</button>
        <button id="redoBtn">↪ Redo</button>
        <button id="exportPlayerBtn">📄 プレイヤーCSV</button>
        <button id="exportSeatBtn">📜 座席CSV</button>
        <button id="saveToGASBtn">📥 GAS保存</button>
        <button id="loadFromGASBtn">📤 GAS読み込み</button>
      </div>
    </section>

    <!-- HTML 内に記述 -->
　　<audio id="alarmSound">
  　　<source src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" type="audio/ogg">
　　</audio>
    
    <!-- 順位登録セクション -->
    <section id="rankingSection" class="section" style="display:none;">
      <h2>順位登録モード</h2>
      <div id="rankingReader" class="qr-reader"></div>
      <ul id="rankingList" class="ranking-list"></ul>
      <button id="confirmRankingBtn">🏆 順位確定</button>
      <p>ドラッグで順位を入れ替えてください</p>
    </section>

    <!-- 履歴セクション -->
    <section id="historySection" class="section" style="display:none;">
      <h2>🎞️ 履歴</h2>
      <button id="exportHistoryBtn">📤 CSV出力</button>
      <div id="historyList" class="history-list"></div>
    </section>

    <!-- 操作ヘルプセクション -->
    <section id="helpSection" class="section" style="display:none;">
      <div class="help-container">
        <button id="closeHelpBtn" onclick="navigate('scanSection')">閉じる ✖</button>
        <h2>操作手順</h2>
        <ol>
          <li>QRコードをスキャンして座席とプレイヤーを登録</li>
          <li>Undo/Redoで操作を修正</li>
          <li>順位登録モードで座席QRをスキャンし、ドラッグで順位確定</li>
          <li>CSVエクスポートやGAS保存でデータ管理</li>
          <li>テーマパネルで座席・プレイヤーの色やフォントサイズを変更可能</li>
          <li>履歴セクションで登録・操作の記録を確認</li>
          <li>タイマーでイベント時間を管理</li>
        </ol>
      </div>
    </section>
  </main>

  <!-- テーマパネル -->
  <div id="themePanel" style="display:none;"></div>

  <script src="app.js"></script>
</body>
</html>
