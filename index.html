<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>座席管理システム</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
</head>
<body>
  <header>
    <h1>座席管理システム</h1>
    <nav id="sidebar">
      <button onclick="navigate('scanSection')">💽QRスキャン</button>
      <button onclick="navigate('rankingSection')">💾順位登録</button>
      <button onclick="navigate('historySection')">🔔履歴</button>
      <button onclick="navigate('helpSection')">🔎操作ヘルプ</button>
      <button onclick="window.open('https://qr212345.github.io/QW/')">📍 リアルタイム座席</button>
      <button onclick="window.open('https://qr212345.github.io/rankingusheet/')">📊 リアルタイムランキング</button>
      </ul>
    </nav>
  </header>

  <main>
    <!-- メッセージ表示 -->
    <div id="messageArea" class="message-area"></div>

    <!-- QRスキャンセクション -->
    <section id="scanSection" class="section">
      <h2>QRコードスキャン</h2>
      <div id="reader" class="qr-reader"></div>
      <p id="result">読み取り結果がここに表示されます</p>
      <div id="seatList" class="seat-list"></div>
      <div class="controls">
        <button id="undoBtn">✏Undo</button>
        <button id="redoBtn">📝Redo</button>
        <button id="exportPlayerBtn">📄プレイヤーCSV</button>
        <button id="exportSeatBtn">📜座席CSV</button>
        <button id="saveToGASBtn">📥GASに保存</button>
        <button id="loadFromGASBtn">📤GASから読み込み</button>
        <button id="themeBtn" onclick="toggleThemePanel()">📚テーマ編集</button>
      </div>
    </section>

    <!-- 順位登録セクション -->
    <section id="rankingSection" class="section" style="display:none;">
      <h2>順位登録モード</h2>
      <div id="rankingReader" class="qr-reader"></div>
      <ul id="rankingList" class="ranking-list"></ul>
      <button id="confirmRankingBtn">順位確定</button>
      <p>ドラッグで順位を入れ替えてください</p>
    </section>

    <!-- 履歴セクション -->
    <section id="historySection" class="section" style="display:none;">
      <h2>履歴</h2>
      <div id="historyList" class="history-list"></div>
    </section>

    <!-- 操作ヘルプセクション -->
    <!-- 操作ヘルプセクション（ここを追加） -->
　　<section id="helpSection" style="display:none;">
　    <div class="help-container">
  　  <button id="closeHelpBtn">閉じる ✖</button>
      <h2>操作手順</h2>
      <ol>
        <li>1.QRコードをスキャンして座席とプレイヤーを登録</li>
        <li>2.必要に応じてUndo/Redoで操作を修正</li>
        <li>3.順位登録モードで座席QRをスキャンし、ドラッグで順位確定</li>
        <li>4.CSVエクスポートやGAS保存でデータを管理</li>
        <li>5.テーマパネルで座席・プレイヤーの色やフォントサイズを変更可能</li>
        <li>6.履歴セクションで登録・鳴らした記録を確認可能</li>
      </ol>
      </div>
    </section>



    <!-- カメラ切替モーダル（非表示） -->
    <div id="cameraModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h3>カメラ選択</h3>
        <button onclick="switchCamera('user')">前面カメラ</button>
        <button onclick="switchCamera('environment')">背面カメラ</button>
        <button onclick="closeCameraModal()">閉じる</button>
      </div>
    </div>

  </main>

  <!-- テーマパネル -->
  <div id="themePanel" style="display:none;"></div>

  <script src="app.js"></script>
</body>
</html>
